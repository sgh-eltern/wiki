groups:
- name: Ghost
  jobs:
  - Test sgh-eltern.de
  - Test wiki.eltern-sgh.de
  - Test geb-herrenberg.de
  - Test freunde-sgh.de

jobs:
  - name: Test sgh-eltern.de
    plan:
    - get: ci-tasks
      trigger: false
    - get: Schedule for SGH Eltern
      trigger: true
    - task: Execute Test on Ghost Inspector
      file: ci-tasks/ci/fetch-result/task.yml
      params:
        url: https://api.ghostinspector.com/v1/suites/5980dea61599c8322646cba8/execute/?apiKey=((ghost.api-key))
    - task: Evaluate Test Results
      file: ci-tasks/ci/evaluate-result/task.yml

  - name: Test wiki.eltern-sgh.de
    plan:
    - get: ci-tasks
      trigger: false
    - get: Schedule for SGH Wiki
      trigger: true
    - task: Execute Test on Ghost Inspector
      file: ci-tasks/ci/fetch-result/task.yml
      params:
        url: https://api.ghostinspector.com/v1/suites/5980e429b1c3a81c61f4d35b/execute/?apiKey=((ghost.api-key))
    - task: Evaluate Test Results
      file: ci-tasks/ci/evaluate-result/task.yml

  - name: Test geb-herrenberg.de
    plan:
    - get: ci-tasks
      trigger: false
    - get: Schedule for GEB
      trigger: true
    - task: Execute Test on Ghost Inspector
      file: ci-tasks/ci/fetch-result/task.yml
      params:
        url: https://api.ghostinspector.com/v1/suites/5980f61fb1c3a81c61f4d6ac/execute/?apiKey=((ghost.api-key))
    - task: Evaluate Test Results
      file: ci-tasks/ci/evaluate-result/task.yml

  - name: Test freunde-sgh.de
    plan:
    - get: ci-tasks
      trigger: false
    - get: Schedule for Freunde
      trigger: true
    - task: Execute Test on Ghost Inspector
      file: ci-tasks/ci/fetch-result/task.yml
      params:
        url: https://api.ghostinspector.com/v1/suites/5980f616b1c3a81c61f4d6ab/execute/?apiKey=((ghost.api-key))
    - task: Evaluate Test Results
      file: ci-tasks/ci/evaluate-result/task.yml

resources:
  - name: ci-tasks
    type: git
    source:
      uri: https://github.com/sgh-eltern/wiki.git
      paths: [ ci/* ]
      branch: master

  #            | Eltern | Wiki | Freunde | GEB
  #  ----------|--------|------|---------|----
  #  Monday    |   1    |   1  |    1    |
  #  Truesday  |   1    |   1  |    1    |  1
  #  Wednesday |   1    |      |    1    |  1
  #  Thursday  |   1    |   1  |         |  1
  #  Friday    |   1    |   1  |    1    |
  #  Saturday  |        |   1  |         |  1
  #  Sunday    |   1    |      |    1    |  1

  - name: Schedule for SGH Eltern
    type: time
    source:
      interval: 24h
      days: [Monday, Tuesday, Wednesday, Thursday, Friday, Sunday]

  - name: Schedule for SGH Wiki
    type: time
    source:
      interval: 24h
      days: [Monday, Tuesday, Thursday, Friday, Saturday]

  - name: Schedule for GEB
    type: time
    source:
      interval: 24h
      days: [Tuesday, Wednesday, Thursday, Saturday, Sunday]

  - name: Schedule for Freunde
    type: time
    source:
      interval: 24h
      days: [Monday, Wednesday, Saturday, Sunday]
